#!/bin/bash

echo "ðŸ”´ AÃ‡ÃƒO URGENTE NECESSÃRIA!"
echo ""
echo "A API Key tanto local quanto na Vercel estÃ¡ BLOQUEADA pelo Google."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ“‹ PASSOS OBRIGATÃ“RIOS (nÃ£o posso fazer isso por vocÃª):"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "1ï¸âƒ£  Criar Nova API Key:"
echo "    â†’ Abra: https://aistudio.google.com/apikey"
echo "    â†’ Clique em 'Create API Key'"
echo "    â†’ Copie a key gerada"
echo ""
echo "2ï¸âƒ£  Atualizar .env.local (ESTE ARQUIVO):"
echo "    â†’ Edite: .env.local"
echo "    â†’ Linha 1: GOOGLE_API_KEY=SUA_NOVA_KEY_AQUI"
echo ""
echo "3ï¸âƒ£  Atualizar Vercel (PRODUÃ‡ÃƒO):"
echo "    â†’ Abra: https://vercel.com/settings/environment-variables"
echo "    â†’ Edite GOOGLE_API_KEY"
echo "    â†’ Cole a nova key"
echo "    â†’ Salve"
echo ""
echo "4ï¸âƒ£  Testar:"
echo "    â†’ Execute: node test-imagen-real.mjs"
echo ""
echo "5ï¸âƒ£  Deploy:"
echo "    â†’ Execute: git commit --allow-empty -m 'new api key' && git push"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âš ï¸  IMPORTANTE: Sem uma nova API Key, NADA funcionarÃ¡!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "â“ Por que isso aconteceu?"
echo "   A API Key AIzaSyByQnR9qMgZTi_kUGvx9u--TtTSV4zP6G8"
echo "   foi exposta publicamente e o Google a bloqueou."
echo ""
echo "ðŸ›¡ï¸  Como evitar no futuro?"
echo "   âœ… NUNCA commite .env.local"
echo "   âœ… NUNCA use NEXT_PUBLIC_ em keys sensÃ­veis"
echo "   âœ… Mantenha keys apenas server-side"
echo ""

# Verificar se .env.local estÃ¡ no .gitignore
if grep -q "^\.env\.local$" .gitignore 2>/dev/null; then
  echo "âœ… .env.local estÃ¡ no .gitignore (seguro)"
else
  echo "âš ï¸  ADICIONE .env.local ao .gitignore!"
  echo ".env.local" >> .gitignore
fi

echo ""
echo "ðŸ“„ DocumentaÃ§Ã£o completa: SOLUCAO_API_KEY_LEAKED.md"
echo ""
